<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DI ì£¼ì‹ (001530) ë°ì´í„° ì‹œê°í™”</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 20px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        background: white;
        border-radius: 15px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        overflow: hidden;
      }

      .header {
        background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
        color: white;
        padding: 30px;
        text-align: center;
      }

      .header h1 {
        margin: 0;
        font-size: 2.5em;
        font-weight: 300;
      }

      .header p {
        margin: 10px 0 0 0;
        opacity: 0.9;
        font-size: 1.1em;
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        padding: 30px;
        background: #f8f9fa;
      }

      .stat-card {
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        text-align: center;
        transition: transform 0.3s ease;
      }

      .stat-card:hover {
        transform: translateY(-5px);
      }

      .stat-value {
        font-size: 2em;
        font-weight: bold;
        color: #2c3e50;
        margin: 10px 0;
      }

      .stat-label {
        color: #7f8c8d;
        font-size: 0.9em;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .chart-container {
        padding: 30px;
        margin: 20px 0;
      }

      .chart-title {
        font-size: 1.5em;
        color: #2c3e50;
        margin-bottom: 20px;
        text-align: center;
        font-weight: 300;
      }

      .chart-wrapper {
        position: relative;
        height: 400px;
        margin-bottom: 40px;
      }

      .controls {
        text-align: center;
        margin: 20px 0;
      }

      .btn {
        background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
        color: white;
        border: none;
        padding: 12px 24px;
        margin: 5px;
        border-radius: 25px;
        cursor: pointer;
        font-size: 14px;
        transition: all 0.3s ease;
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
      }

      .btn.active {
        background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
      }

      .footer {
        background: #34495e;
        color: white;
        text-align: center;
        padding: 20px;
        font-size: 0.9em;
      }

      @media (max-width: 768px) {
        .header h1 {
          font-size: 1.8em;
        }

        .chart-wrapper {
          height: 300px;
        }

        .stats-grid {
          grid-template-columns: repeat(2, 1fr);
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>ğŸ¢ DI ì£¼ì‹ (001530)</h1>
        <p>ì‹¤ì‹œê°„ ì£¼ì‹ ë°ì´í„° ì‹œê°í™” ëŒ€ì‹œë³´ë“œ</p>
      </div>

      <div class="stats-grid" id="statsGrid">
        <!-- í†µê³„ ì¹´ë“œë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
      </div>

      <div class="controls">
        <button class="btn active" onclick="showChart('price')">
          ê°€ê²© ì°¨íŠ¸
        </button>
        <button class="btn" onclick="showChart('volume')">ê±°ë˜ëŸ‰ ì°¨íŠ¸</button>
        <button class="btn" onclick="showChart('foreign')">
          ì™¸êµ­ì¸ ë³´ìœ ìœ¨
        </button>
        <button class="btn" onclick="showChart('all')">ì „ì²´ ë³´ê¸°</button>
      </div>

      <div class="chart-container">
        <div id="priceChart" class="chart-section">
          <div class="chart-title">ğŸ“ˆ ì£¼ê°€ ìº”ë“¤ìŠ¤í‹± ì°¨íŠ¸</div>
          <div class="chart-wrapper">
            <canvas id="candlestickChart"></canvas>
          </div>
        </div>

        <div id="volumeChart" class="chart-section" style="display: none">
          <div class="chart-title">ğŸ“Š ê±°ë˜ëŸ‰ ì°¨íŠ¸</div>
          <div class="chart-wrapper">
            <canvas id="volumeChartCanvas"></canvas>
          </div>
        </div>

        <div id="foreignChart" class="chart-section" style="display: none">
          <div class="chart-title">ğŸŒ ì™¸êµ­ì¸ ë³´ìœ ìœ¨ ì¶”ì´</div>
          <div class="chart-wrapper">
            <canvas id="foreignChartCanvas"></canvas>
          </div>
        </div>
      </div>

      <div class="footer">
        <p>Â© 2025 ì£¼ì‹ ë°ì´í„° ì‹œê°í™” ë„êµ¬ | ë„¤ì´ë²„ ê¸ˆìœµ API ê¸°ë°˜</p>
      </div>
    </div>

    <script>
      let stockData = [];
      let charts = {};

      // ì£¼ì‹ ë°ì´í„° (JSON íŒŒì¼ì—ì„œ ë³µì‚¬í•œ ë°ì´í„°)
      const stockDataRaw = {
        code: "001530",
        infoType: "item",
        periodType: "dayCandle",
        newlyListed: false,
        stockExchangeType: "KRX",
        hasVolume: true,
        decimalUnit: 0,
        priceInfos: [],
      };

      // JSON íŒŒì¼ ë¡œë“œ (CORS ë¬¸ì œ í•´ê²°ì„ ìœ„í•´ ë°ì´í„°ë¥¼ ì§ì ‘ í¬í•¨)
      async function loadStockData() {
        try {
          // ì™¸ë¶€ JSON íŒŒì¼ì„ ì½ì–´ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜
          await loadJSONData();

          // ë°ì´í„°ê°€ ìˆëŠ” ê²½ìš°ì—ë§Œ ì²˜ë¦¬
          if (stockDataRaw.priceInfos && stockDataRaw.priceInfos.length > 0) {
            stockData = stockDataRaw.priceInfos;

            // ë‚ ì§œìˆœìœ¼ë¡œ ì •ë ¬
            stockData.sort(
              (a, b) => new Date(a.localDate) - new Date(b.localDate)
            );

            // ìµœê·¼ 100ì¼ ë°ì´í„°ë§Œ ì‚¬ìš© (ì„±ëŠ¥ ìµœì í™”)
            stockData = stockData.slice(-100);

            initializeStats();
            initializeCharts();
          }
        } catch (error) {
          console.error("ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:", error);
          showFileInput();
        }
      }

      // JSON ë°ì´í„°ë¥¼ ë™ì ìœ¼ë¡œ ë¡œë“œí•˜ëŠ” í•¨ìˆ˜
      async function loadJSONData() {
        // ë¡œì»¬ ì„œë²„ í™˜ê²½ì—ì„œëŠ” fetchë¥¼ ì‹œë„
        try {
          const response = await fetch(
            "stock_data_001530_20250908_000628.json"
          );
          if (response.ok) {
            const data = await response.json();
            stockDataRaw.priceInfos = data.priceInfos;
            return;
          }
        } catch (fetchError) {
          console.log("Fetch ì‹¤íŒ¨, ëŒ€ì•ˆ ë°©ë²• ì‚¬ìš©:", fetchError.message);
        }

        // Fetchê°€ ì‹¤íŒ¨í•˜ë©´ íŒŒì¼ ì…ë ¥ì„ í†µí•´ ë°ì´í„° ë¡œë“œ
        showFileInput();
      }

      // íŒŒì¼ ì…ë ¥ UIë¥¼ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
      function showFileInput() {
        const fileInputHTML = `
           <div style="text-align: center; padding: 40px; background: #f8f9fa; margin: 20px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
             <div style="font-size: 4em; margin-bottom: 20px;">ğŸ“</div>
             <h3 style="color: #2c3e50; margin-bottom: 15px;">JSON íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”</h3>
             <p style="color: #7f8c8d; margin-bottom: 25px; line-height: 1.6;">
               ë¸Œë¼ìš°ì € ë³´ì•ˆ ì •ì±…(CORS)ìœ¼ë¡œ ì¸í•´ ë¡œì»¬ íŒŒì¼ì„ ì§ì ‘ ì½ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.<br>
               <strong>stock_data_001530_20250908_000628.json</strong> íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.
             </p>
             <div style="border: 2px dashed #3498db; border-radius: 10px; padding: 20px; margin: 20px 0; background: #ecf0f1;">
               <input type="file" id="jsonFileInput" accept=".json" style="
                 margin: 10px; 
                 padding: 10px;
                 border: 1px solid #bdc3c7;
                 border-radius: 5px;
                 background: white;
                 font-size: 14px;
               ">
             </div>
             <button onclick="loadSelectedFile()" class="btn" style="font-size: 16px; padding: 15px 30px;">
               ğŸ“Š íŒŒì¼ ë¡œë“œí•˜ì—¬ ì°¨íŠ¸ ìƒì„±
             </button>
             <div style="margin-top: 25px; padding: 15px; background: #fff3cd; border-radius: 8px; color: #856404; font-size: 14px;">
               <strong>ğŸ’¡ íŒ:</strong> ë¡œì»¬ ì„œë²„ë¥¼ ì‹¤í–‰í•˜ë©´ ìë™ìœ¼ë¡œ íŒŒì¼ì„ ì½ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
               <code>python -m http.server 8000</code> ë˜ëŠ” <code>npx http-server</code>
             </div>
           </div>
         `;

        document.querySelector(".chart-container").innerHTML = fileInputHTML;

        // í†µê³„ ì„¹ì…˜ë„ ì´ˆê¸° ìƒíƒœë¡œ ì„¤ì •
        document.getElementById("statsGrid").innerHTML = `
           <div class="stat-card">
             <div class="stat-label">ìƒíƒœ</div>
             <div class="stat-value" style="color: #f39c12; font-size: 1.5em;">
               íŒŒì¼ ë¡œë“œ ëŒ€ê¸°ì¤‘
             </div>
           </div>
         `;
      }

      // ì„ íƒëœ íŒŒì¼ì„ ë¡œë“œí•˜ëŠ” í•¨ìˆ˜
      function loadSelectedFile() {
        const fileInput = document.getElementById("jsonFileInput");
        const file = fileInput.files[0];

        if (!file) {
          alert("íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.");
          return;
        }

        // ë¡œë”© í‘œì‹œ
        document.getElementById("statsGrid").innerHTML = `
           <div class="stat-card">
             <div class="stat-label">ìƒíƒœ</div>
             <div class="stat-value" style="color: #3498db; font-size: 1.5em;">
               ğŸ“Š ë°ì´í„° ë¡œë”©ì¤‘...
             </div>
           </div>
         `;

        const reader = new FileReader();
        reader.onload = function (e) {
          try {
            const data = JSON.parse(e.target.result);

            if (!data.priceInfos || data.priceInfos.length === 0) {
              throw new Error("ìœ íš¨í•œ ì£¼ì‹ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.");
            }

            stockDataRaw.priceInfos = data.priceInfos;

            // UI ë³µì›
            restoreChartUI();

            // ë°ì´í„° ì²˜ë¦¬ ë° ì°¨íŠ¸ ìƒì„±
            stockData = stockDataRaw.priceInfos;
            stockData.sort(
              (a, b) => new Date(a.localDate) - new Date(b.localDate)
            );
            stockData = stockData.slice(-100);

            // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
            document.getElementById("statsGrid").innerHTML = `
               <div class="stat-card">
                 <div class="stat-label">ìƒíƒœ</div>
                 <div class="stat-value" style="color: #27ae60; font-size: 1.5em;">
                   âœ… ë¡œë“œ ì™„ë£Œ
                 </div>
               </div>
             `;

            // ì ì‹œ í›„ ì •ìƒ í†µê³„ë¡œ ì „í™˜
            setTimeout(() => {
              initializeStats();
              initializeCharts();
            }, 500);
          } catch (error) {
            console.error("íŒŒì¼ ë¡œë“œ ì˜¤ë¥˜:", error);
            document.getElementById("statsGrid").innerHTML = `
               <div class="stat-card">
                 <div class="stat-label">ì˜¤ë¥˜</div>
                 <div class="stat-value" style="color: #e74c3c; font-size: 1.2em;">
                   âŒ íŒŒì¼ ë¡œë“œ ì‹¤íŒ¨
                 </div>
               </div>
             `;
            alert("JSON íŒŒì¼ íŒŒì‹± ì˜¤ë¥˜: " + error.message);
          }
        };

        reader.readAsText(file);
      }

      // ì°¨íŠ¸ UIë¥¼ ë³µì›í•˜ëŠ” í•¨ìˆ˜
      function restoreChartUI() {
        document.querySelector(".chart-container").innerHTML = `
           <div id="priceChart" class="chart-section">
             <div class="chart-title">ğŸ“ˆ ì£¼ê°€ ìº”ë“¤ìŠ¤í‹± ì°¨íŠ¸</div>
             <div class="chart-wrapper">
               <canvas id="candlestickChart"></canvas>
             </div>
           </div>

           <div id="volumeChart" class="chart-section" style="display: none">
             <div class="chart-title">ğŸ“Š ê±°ë˜ëŸ‰ ì°¨íŠ¸</div>
             <div class="chart-wrapper">
               <canvas id="volumeChartCanvas"></canvas>
             </div>
           </div>

           <div id="foreignChart" class="chart-section" style="display: none">
             <div class="chart-title">ğŸŒ ì™¸êµ­ì¸ ë³´ìœ ìœ¨ ì¶”ì´</div>
             <div class="chart-wrapper">
               <canvas id="foreignChartCanvas"></canvas>
             </div>
           </div>
         `;
      }

      // í†µê³„ ì´ˆê¸°í™”
      function initializeStats() {
        const latest = stockData[stockData.length - 1];
        const oldest = stockData[0];
        const prices = stockData.map((d) => d.closePrice);
        const volumes = stockData.map((d) => d.accumulatedTradingVolume);

        const maxPrice = Math.max(...prices);
        const minPrice = Math.min(...prices);
        const avgVolume = volumes.reduce((a, b) => a + b, 0) / volumes.length;
        const priceChange = latest.closePrice - oldest.closePrice;
        const priceChangePercent = (
          (priceChange / oldest.closePrice) *
          100
        ).toFixed(2);

        const statsHTML = `
                <div class="stat-card">
                    <div class="stat-label">í˜„ì¬ê°€</div>
                    <div class="stat-value" style="color: ${
                      latest.closePrice >= oldest.closePrice
                        ? "#27ae60"
                        : "#e74c3c"
                    }">
                        ${latest.closePrice.toLocaleString()}ì›
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">ë“±ë½ë¥ </div>
                    <div class="stat-value" style="color: ${
                      priceChange >= 0 ? "#27ae60" : "#e74c3c"
                    }">
                        ${priceChange >= 0 ? "+" : ""}${priceChangePercent}%
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">52ì£¼ ìµœê³ ê°€</div>
                    <div class="stat-value">${maxPrice.toLocaleString()}ì›</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">52ì£¼ ìµœì €ê°€</div>
                    <div class="stat-value">${minPrice.toLocaleString()}ì›</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">í‰ê·  ê±°ë˜ëŸ‰</div>
                    <div class="stat-value">${Math.round(
                      avgVolume
                    ).toLocaleString()}ì£¼</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">ì™¸êµ­ì¸ ë³´ìœ ìœ¨</div>
                    <div class="stat-value">${
                      latest.foreignRetentionRate
                    }%</div>
                </div>
            `;

        document.getElementById("statsGrid").innerHTML = statsHTML;
      }

      // ì°¨íŠ¸ ì´ˆê¸°í™”
      function initializeCharts() {
        createCandlestickChart();
        createVolumeChart();
        createForeignChart();
      }

      // ë‚ ì§œ ë¬¸ìì—´ì„ Date ê°ì²´ë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜
      function parseDate(dateStr) {
        // YYYYMMDD í˜•ì‹ì„ YYYY-MM-DDë¡œ ë³€í™˜
        const year = dateStr.substring(0, 4);
        const month = dateStr.substring(4, 6);
        const day = dateStr.substring(6, 8);
        return new Date(year, month - 1, day);
      }

      // ìº”ë“¤ìŠ¤í‹± ì°¨íŠ¸ ìƒì„±
      function createCandlestickChart() {
        const ctx = document
          .getElementById("candlestickChart")
          .getContext("2d");

        charts.candlestick = new Chart(ctx, {
          type: "line",
          data: {
            datasets: [
              {
                label: "ì¢…ê°€",
                data: stockData.map((item) => ({
                  x: parseDate(item.localDate),
                  y: item.closePrice,
                })),
                borderColor: "#3498db",
                backgroundColor: "rgba(52, 152, 219, 0.1)",
                fill: true,
                tension: 0.1,
                pointRadius: 3,
                pointHoverRadius: 6,
              },
              {
                label: "ê³ ê°€",
                data: stockData.map((item) => ({
                  x: parseDate(item.localDate),
                  y: item.highPrice,
                })),
                borderColor: "#e74c3c",
                backgroundColor: "transparent",
                borderDash: [5, 5],
                pointRadius: 2,
                pointHoverRadius: 4,
              },
              {
                label: "ì €ê°€",
                data: stockData.map((item) => ({
                  x: parseDate(item.localDate),
                  y: item.lowPrice,
                })),
                borderColor: "#27ae60",
                backgroundColor: "transparent",
                borderDash: [5, 5],
                pointRadius: 2,
                pointHoverRadius: 4,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            interaction: {
              intersect: false,
              mode: "index",
            },
            scales: {
              x: {
                type: "time",
                time: {
                  displayFormats: {
                    day: "MM/dd",
                    week: "MM/dd",
                    month: "yy/MM",
                  },
                },
                title: {
                  display: true,
                  text: "ë‚ ì§œ",
                },
              },
              y: {
                title: {
                  display: true,
                  text: "ê°€ê²© (ì›)",
                },
                ticks: {
                  callback: function (value) {
                    return value.toLocaleString() + "ì›";
                  },
                },
              },
            },
            plugins: {
              legend: {
                display: true,
                position: "top",
              },
              tooltip: {
                callbacks: {
                  label: function (context) {
                    return (
                      context.dataset.label +
                      ": " +
                      context.parsed.y.toLocaleString() +
                      "ì›"
                    );
                  },
                },
              },
            },
          },
        });
      }

      // ê±°ë˜ëŸ‰ ì°¨íŠ¸ ìƒì„±
      function createVolumeChart() {
        const ctx = document
          .getElementById("volumeChartCanvas")
          .getContext("2d");

        charts.volume = new Chart(ctx, {
          type: "bar",
          data: {
            datasets: [
              {
                label: "ê±°ë˜ëŸ‰",
                data: stockData.map((item) => ({
                  x: parseDate(item.localDate),
                  y: item.accumulatedTradingVolume,
                })),
                backgroundColor: stockData.map((item, index) => {
                  if (index === 0) return "#3498db";
                  const prevClose = stockData[index - 1].closePrice;
                  return item.closePrice >= prevClose ? "#27ae60" : "#e74c3c";
                }),
                borderWidth: 0,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              x: {
                type: "time",
                time: {
                  displayFormats: {
                    day: "MM/dd",
                    week: "MM/dd",
                    month: "yy/MM",
                  },
                },
                title: {
                  display: true,
                  text: "ë‚ ì§œ",
                },
              },
              y: {
                title: {
                  display: true,
                  text: "ê±°ë˜ëŸ‰ (ì£¼)",
                },
                ticks: {
                  callback: function (value) {
                    return value.toLocaleString() + "ì£¼";
                  },
                },
              },
            },
            plugins: {
              legend: {
                display: false,
              },
              tooltip: {
                callbacks: {
                  label: function (context) {
                    return (
                      "ê±°ë˜ëŸ‰: " + context.parsed.y.toLocaleString() + "ì£¼"
                    );
                  },
                },
              },
            },
          },
        });
      }

      // ì™¸êµ­ì¸ ë³´ìœ ìœ¨ ì°¨íŠ¸ ìƒì„±
      function createForeignChart() {
        const ctx = document
          .getElementById("foreignChartCanvas")
          .getContext("2d");

        charts.foreign = new Chart(ctx, {
          type: "line",
          data: {
            datasets: [
              {
                label: "ì™¸êµ­ì¸ ë³´ìœ ìœ¨",
                data: stockData.map((item) => ({
                  x: parseDate(item.localDate),
                  y: item.foreignRetentionRate,
                })),
                borderColor: "#9b59b6",
                backgroundColor: "rgba(155, 89, 182, 0.1)",
                fill: true,
                tension: 0.4,
                pointRadius: 3,
                pointHoverRadius: 6,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              x: {
                type: "time",
                time: {
                  displayFormats: {
                    day: "MM/dd",
                    week: "MM/dd",
                    month: "yy/MM",
                  },
                },
                title: {
                  display: true,
                  text: "ë‚ ì§œ",
                },
              },
              y: {
                title: {
                  display: true,
                  text: "ë³´ìœ ìœ¨ (%)",
                },
                ticks: {
                  callback: function (value) {
                    return value + "%";
                  },
                },
              },
            },
            plugins: {
              legend: {
                display: false,
              },
              tooltip: {
                callbacks: {
                  label: function (context) {
                    return "ì™¸êµ­ì¸ ë³´ìœ ìœ¨: " + context.parsed.y + "%";
                  },
                },
              },
            },
          },
        });
      }

      // ì°¨íŠ¸ í‘œì‹œ í•¨ìˆ˜
      function showChart(type) {
        // ëª¨ë“  ë²„íŠ¼ì˜ active í´ë˜ìŠ¤ ì œê±°
        document
          .querySelectorAll(".btn")
          .forEach((btn) => btn.classList.remove("active"));

        // í´ë¦­ëœ ë²„íŠ¼ì— active í´ë˜ìŠ¤ ì¶”ê°€
        event.target.classList.add("active");

        // ëª¨ë“  ì°¨íŠ¸ ìˆ¨ê¸°ê¸°
        document.querySelectorAll(".chart-section").forEach((section) => {
          section.style.display = "none";
        });

        // ì„ íƒëœ ì°¨íŠ¸ í‘œì‹œ
        if (type === "price") {
          document.getElementById("priceChart").style.display = "block";
        } else if (type === "volume") {
          document.getElementById("volumeChart").style.display = "block";
        } else if (type === "foreign") {
          document.getElementById("foreignChart").style.display = "block";
        } else if (type === "all") {
          document.querySelectorAll(".chart-section").forEach((section) => {
            section.style.display = "block";
          });
        }

        // ì°¨íŠ¸ í¬ê¸° ì¬ì¡°ì •
        setTimeout(() => {
          Object.values(charts).forEach((chart) => {
            if (chart) chart.resize();
          });
        }, 100);
      }

      // í˜ì´ì§€ ë¡œë“œ ì‹œ ë°ì´í„° ë¡œë“œ
      window.addEventListener("load", loadStockData);
    </script>
  </body>
</html>
